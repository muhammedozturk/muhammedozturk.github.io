
<!DOCTYPE html>
<!--
    Plain-Academic by Vasilios Mavroudis
    Released under the  Simplified BSD License/FreeBSD (2-clause) License.
    https://github.com/mavroudisv/plain-academic
-->

<html lang="en">
<head>
  <title>numpy array from .jpg files</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <link href='https://fonts.googleapis.com/css?family=Oswald:700' rel='stylesheet' type='text/css'>
</head>
<body>


<!-- Navigation -->
    <nav class="navbar navbar-inverse">
      <div class="container">
		<ul class="nav navbar-nav">
              <li><a href="index.html">Home</a></li>
              <li><a href="projects.html">Projects</a></li>
              <li><a href="#publications">Publications</a></li> 
              <li><a href="#CV">CV</a></li> 
		</ul>
	  </div>
	</nav>
	

  
  <!-- Page Content -->
    <div class="container">

        <div class="row">

            <!-- Entries Column -->
            <div class="col-md-8" style="height: 100vh;">
                
                <!-- Main Image -->
       
                
			
			<article>
			<h3>How to convert .jpg files to numpy array to perform Convolutional Neural Network?</h3>
				
			<article>
If you intend to perform convolutional neural network on R, Pillow and Anaconda settings can cause problems if you do not use images converted to numpy array format like Mnist dataset. To solve this problem, image files such as .jpg should be converted to numpy array format in python environment. In this article, the necessary procedures are detailed as follows: 
			</article>
		
               	     <ol>
  <li>Python Application project is created on Visual Studio. </li>
  <li>Opencv package needs to be installed. For this, Tools=>Python=>Python Environments is selected. </br><img class="img-responsive" src="env.png" alt=""></br></li>
  <li>Select "Open in PowerShell" on the screen that appears. </br><img class="img-responsive" src="shell.png" alt=""><br></li>
	    <li>Install opencv by typing "pip install opencv-python" command. However, it should be noted that Visual Studio must be opened in admin mode to avoid an error.</br><img class="img-responsive" src="shell2.png" alt=""><br> </li>
	<li>After the installation is complete, the following library sections are added to the .py file.
Here cv2 represents opencv. Required for capturing glob image files. Np definition is an abbreviation for numpy library.
	</br>
<b>import cv2</b></br>
<b>import glob</b></br>
<b>import numpy as np </b></br></li>
<li>Two arrays are defined. X_data is the array inserted after the images were taken. X_array is a numpy array of images in .jpg format. The conversion takes place for all images in the corresponding folder in the loop. Each image file path is shown while the codes are running.  
</br><b>X_data = []</b></br>
<b>X_array=[]</b></br>
<b>files = glob.glob ("C:/mainFrame/makaleler/patent/dataSet/aflw/data/flickr/1/*.jpg")</b></br>
<b>for myFile in files:</b></br>
    <b>print(myFile)</b></br>
    <b>image = cv2.imread (myFile)</b></br>
   <b> X_data.append (image)</b></br>
    <b>X_array.append(np.array(X_data))	</b></br>
<img class="img-responsive" src="output.png" alt="">
</li>
<li>
	 The picture folder view is as follows:
	 </br>
<img class="img-responsive" src="imageFolder.png" alt="">
</li>
<li>
	The following lines are added so that the converted images can be saved in .txt and .npy formats. The .txt file is as follows. The files are created inside the project folder. 
</br>
<b>np.savetxt('test.txt',X_array,fmt='%5s',delimiter=',')</b></br>
<b>np.save("fvec.npy", X_array)</b>
</br><img class="img-responsive" src="extFile.png" alt=""></br>
</br><img class="img-responsive" src="folder.png" alt="">
</li>
<li>
	All the codes are as follows. The resulting two different data sets can be used both as .txt and as .npy on the R package.

After copying the .npy file to the working folder to load the .npy file on R, the data set can be imported into the R environment with the following codes. For this, the "RcppCNPy" library must be loaded in the R environment with the install.packages ("RcppCNPy") command. 
	</br>
<b>library(RcppCNPy)</b></br>
<b>npData <- npyLoad("fvec.npy") </b>
</li>
</ol> 
            



<h3>References</h3>
<ol>
<li>Eddelbuettela, D., & Wub, W. RcppCNPy: Reading and writing NumPy binary files.</li>
<li>https://stackoverflow.com/questions/37747021/create-numpy-array-of-images</li>
<li>https://shirinsplayground.netlify.app/2018/06/keras_fruits/</li>
</ol>
<h2>APPENDIX</h2>
<h3>Complete Python code</h3>
<img class="img-responsive" src="kod.png" alt="">
</div> 

           
	
            
        </div>
 <div>
	
</div>


		
	
    <!-- /.containerd -->
    
    <!-- Other people may like it too! -->
    <a style="color:#b5bec9;font-size:0.8em; float:right;" href="https://github.com/mavroudisv/plain-academic">Plain Academic</a> 
    
</body>

</html>
